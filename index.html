import React, { useEffect, useMemo, useState } from "react";
import { motion } from "framer-motion";
import {
  ArrowRight,
  BadgeCheck,
  Building2,
  Cable,
  CheckCircle2,
  Clock,
  FileText,
  Headset,
  Mail,
  MapPin,
  MessageCircle,
  Network,
  Phone,
  ShieldCheck,
  Users,
  Wifi,
} from "lucide-react";

// shadcn/ui
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Separator } from "@/components/ui/separator";
import {
  Accordion,
  AccordionContent,
  AccordionItem,
  AccordionTrigger,
} from "@/components/ui/accordion";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from "@/components/ui/dialog";

function cn(...classes: Array<string | false | null | undefined>) {
  return classes.filter(Boolean).join(" ");
}

/**
 * ‚úÖ Multi‚Äëp√°gina (SPA) usando hash routing: /#/home, /#/servicios, etc.
 * ‚úÖ Enfoque B2B
 * ‚úÖ CTAs y WhatsApp flotante
 * ‚úÖ Listo para publicar en Vercel/Netlify
 *
 * PARA DEJARLO 100% REAL:
 * 1) Cambia los datos de BRAND
 * 2) Sube el logo oficial a /public y ajusta logoUrl
 * 3) Conecta formularios a email/CRM (EmailJS, Formspree, HubSpot, etc.)
 */

const BRAND = {
  name: "Chile Telko",
  tagline: "Conectividad profesional para empresas en Chile",
  subtagline:
    "Soluciones confiables, escalables y a medida: internet empresarial, enlaces dedicados, telefon√≠a IP y redes.",

  // üîÅ Reemplaza por datos reales
  phoneDisplay: "+56 9 0000 0000",
  phoneHref: "tel:+56900000000",
  whatsappHref: "https://wa.me/56900000000",
  emailDisplay: "contacto@chiletelko.cl",
  emailHref: "mailto:contacto@chiletelko.cl",
  address: "Santiago, Chile",
  hours: "Lun‚ÄìVie 09:00‚Äì18:00",

  // ‚úÖ Pon tu logo oficial en /public y ajusta esta ruta
  logoUrl: "/logo-chile-telko.svg",
};

const ROUTES = [
  { key: "home", label: "Inicio" },
  { key: "servicios", label: "Servicios" },
  { key: "soluciones", label: "Soluciones" },
  { key: "casos", label: "Clientes" },
  { key: "nosotros", label: "Nosotros" },
  { key: "soporte", label: "Soporte" },
  { key: "contacto", label: "Contacto" },
] as const;

type RouteKey = (typeof ROUTES)[number]["key"];

function getRouteFromHash(): RouteKey {
  const hash = (typeof window !== "undefined" ? window.location.hash : "") || "";
  const parts = hash.replace("#", "").split("/").filter(Boolean);
  const route = (parts[0] || "home") as RouteKey;
  if (ROUTES.some((r) => r.key === route)) return route;
  return "home";
}

function navigate(route: RouteKey) {
  if (typeof window === "undefined") return;
  window.location.hash = `#/${route}`;
}

const fadeUp = {
  initial: { opacity: 0, y: 14 },
  whileInView: { opacity: 1, y: 0 },
  viewport: { once: true, margin: "-80px" },
  transition: { duration: 0.5, ease: "easeOut" },
};

const SERVICES = [
  {
    key: "internet",
    icon: Wifi,
    title: "Internet Empresas",
    summary: "Conectividad estable para operaciones cr√≠ticas.",
    bullets: ["Alta disponibilidad", "Escalable por sede", "Soporte especializado"],
    who: "PYMES y empresas con operaci√≥n diaria cr√≠tica.",
  },
  {
    key: "voip",
    icon: Phone,
    title: "Telefon√≠a IP",
    summary: "Comunicaci√≥n moderna, flexible y eficiente.",
    bullets: ["Central virtual", "Extensiones remotas", "Ahorro y control"],
    who: "Equipos h√≠bridos, multi‚Äësucursal, call centers peque√±os.",
  },
  {
    key: "dedicado",
    icon: Cable,
    title: "Enlaces Dedicados",
    summary: "Velocidad garantizada para servicios sensibles.",
    bullets: ["Baja latencia", "Ancho dedicado", "SLA (seg√∫n proyecto)"],
    who: "Empresas que necesitan estabilidad y desempe√±o constante.",
  },
  {
    key: "redes",
    icon: Network,
    title: "Redes & Fibra √ìptica",
    summary: "Dise√±o, instalaci√≥n y mantenci√≥n profesional.",
    bullets: ["Cableado / FO", "Wi‚ÄëFi empresarial", "Pruebas y documentaci√≥n"],
    who: "Oficinas, bodegas, retail y proyectos de infraestructura.",
  },
] as const;

const SOLUTIONS = [
  {
    key: "pymes",
    icon: Building2,
    title: "PYMES",
    desc: "Conectividad y telefon√≠a listas para crecer, sin complejidad.",
    bullets: ["Implementaci√≥n r√°pida", "Costos controlados", "Soporte cercano"],
  },
  {
    key: "empresas",
    icon: ShieldCheck,
    title: "Empresas",
    desc: "Dise√±os a medida, continuidad operativa y est√°ndares profesionales.",
    bullets: ["Redundancia y escalabilidad", "Documentaci√≥n", "Acompa√±amiento t√©cnico"],
  },
  {
    key: "proyectos",
    icon: FileText,
    title: "Proyectos Especiales",
    desc: "Migraciones, ampliaciones, cableado, FO y puesta en marcha.",
    bullets: ["Levantamiento en terreno", "Plan de trabajo", "Entrega con pruebas"],
  },
] as const;

const FAQS = [
  {
    q: "¬øC√≥mo cotizo?",
    a: "Completa el formulario con empresa, comuna, servicio(s) y tama√±o (usuarios/sedes). Te respondemos con propuesta y pr√≥ximos pasos.",
  },
  {
    q: "¬øAtienden fuera de Santiago?",
    a: "S√≠, seg√∫n factibilidad t√©cnica y alcance. Indica regi√≥n/comuna para validar cobertura y tiempos.",
  },
  {
    q: "¬øIncluye soporte t√©cnico?",
    a: "S√≠. Canales claros por WhatsApp/email/formulario. Para clientes con SLA, se aplican tiempos y prioridades acordadas.",
  },
  {
    q: "¬øHacen redes internas (Wi‚ÄëFi, cableado, FO)?",
    a: "S√≠. Levantamiento, dise√±o e implementaci√≥n con documentaci√≥n y pruebas seg√∫n alcance.",
  },
];

function PageContainer({
  title,
  subtitle,
  children,
}: {
  title: string;
  subtitle?: string;
  children: React.ReactNode;
}) {
  return (
    <div className="mx-auto w-full max-w-6xl px-4 pb-16 pt-10">
      <motion.div {...fadeUp}>
        <h1 className="text-3xl font-semibold tracking-tight md:text-4xl">{title}</h1>
        {subtitle ? <p className="mt-3 max-w-2xl text-muted-foreground">{subtitle}</p> : null}
      </motion.div>
      <div className="mt-8">{children}</div>
    </div>
  );
}

function QuoteDialog({ triggerVariant = "default" }: { triggerVariant?: "default" | "secondary" | "outline" }) {
  const [sent, setSent] = useState(false);

  return (
    <Dialog>
      <DialogTrigger asChild>
        <Button variant={triggerVariant} className="gap-2">
          Solicitar cotizaci√≥n <ArrowRight className="h-4 w-4" />
        </Button>
      </DialogTrigger>
      <DialogContent className="sm:max-w-[640px]">
        <DialogHeader>
          <DialogTitle>Solicitar cotizaci√≥n</DialogTitle>
          <DialogDescription>
            MVP listo. Al publicarlo, conecta este formulario a tu email/CRM para recibir leads autom√°ticamente.
          </DialogDescription>
        </DialogHeader>

        {sent ? (
          <div className="rounded-2xl border p-5">
            <div className="flex items-start gap-3">
              <CheckCircle2 className="mt-0.5 h-5 w-5" />
              <div>
                <p className="font-medium">¬°Solicitud enviada!</p>
                <p className="mt-1 text-sm text-muted-foreground">
                  Te contactaremos a la brevedad para confirmar requerimientos.
                </p>
              </div>
            </div>
          </div>
        ) : (
          <form
            className="grid gap-4"
            onSubmit={(e) => {
              e.preventDefault();
              setSent(true);
            }}
          >
            <div className="grid gap-4 md:grid-cols-2">
              <div className="grid gap-2">
                <label className="text-sm font-medium">Empresa</label>
                <Input placeholder="Nombre de tu empresa" required />
              </div>
              <div className="grid gap-2">
                <label className="text-sm font-medium">Rubro</label>
                <Input placeholder="Ej: log√≠stica, retail, servicios" />
              </div>
              <div className="grid gap-2">
                <label className="text-sm font-medium">Nombre y cargo</label>
                <Input placeholder="Ej: Mat√≠as Pinto, Operaciones" required />
              </div>
              <div className="grid gap-2">
                <label className="text-sm font-medium">Tel√©fono</label>
                <Input placeholder="+56 9 ‚Ä¶" required />
              </div>
              <div className="grid gap-2 md:col-span-2">
                <label className="text-sm font-medium">Email</label>
                <Input type="email" placeholder="tu@empresa.cl" required />
              </div>
              <div className="grid gap-2 md:col-span-2">
                <label className="text-sm font-medium">Ubicaci√≥n</label>
                <Input placeholder="Comuna, ciudad" required />
              </div>
            </div>

            <div className="grid gap-2">
              <label className="text-sm font-medium">¬øQu√© necesitas?</label>
              <Textarea
                placeholder="Ej: Internet dedicado para 2 sedes + telefon√≠a IP para 30 usuarios. Necesitamos continuidad y soporte."
                className="min-h-[110px]"
                required
              />
              <p className="text-xs text-muted-foreground">
                Tip: incluye n√∫mero de sedes, usuarios y si necesitas redundancia.
              </p>
            </div>

            <div className="flex flex-col gap-2 sm:flex-row sm:justify-end">
              <Button type="submit" className="gap-2">
                Enviar solicitud <ArrowRight className="h-4 w-4" />
              </Button>
              <Button
                type="button"
                variant="outline"
                onClick={() => window.open(BRAND.whatsappHref, "_blank")}
                className="gap-2"
              >
                WhatsApp <MessageCircle className="h-4 w-4" />
              </Button>
            </div>
          </form>
        )}
      </DialogContent>
    </Dialog>
  );
}

function Header({ route }: { route: RouteKey }) {
  const [open, setOpen] = useState(false);

  useEffect(() => {
    const close = () => setOpen(false);
    window.addEventListener("hashchange", close);
    return () => window.removeEventListener("hashchange", close);
  }, []);

  return (
    <div className="sticky top-0 z-50 border-b bg-background/80 backdrop-blur">
      <div className="mx-auto flex max-w-6xl items-center justify-between px-4 py-3">
        <button
          onClick={() => navigate("home")}
          className="flex items-center gap-3 rounded-xl px-2 py-1 text-left hover:bg-muted"
          aria-label={`${BRAND.name} - ir a inicio`}
        >
          <div className="flex h-9 w-9 items-center justify-center overflow-hidden rounded-xl border bg-background">
            {/* Logo (pon tu archivo en /public) */}
            {/* eslint-disable-next-line @next/next/no-img-element */}
            <img
              src={BRAND.logoUrl}
              alt={`${BRAND.name} logo`}
              className="h-full w-full object-contain"
              onError={(e) => {
                (e.currentTarget as HTMLImageElement).style.display = "none";
              }}
            />
          </div>
          <div>
            <div className="text-sm font-semibold leading-tight">{BRAND.name}</div>
            <div className="text-xs text-muted-foreground">B2B Telecom</div>
          </div>
        </button>

        <nav className="hidden items-center gap-1 md:flex">
          {ROUTES.map((r) => (
            <Button
              key={r.key}
              variant={route === r.key ? "secondary" : "ghost"}
              onClick={() => navigate(r.key)}
              className="rounded-xl"
            >
              {r.label}
            </Button>
          ))}
        </nav>

        <div className="hidden items-center gap-2 md:flex">
          <Button
            variant="outline"
            className="gap-2"
            onClick={() => window.open(BRAND.whatsappHref, "_blank")}
          >
            WhatsApp <MessageCircle className="h-4 w-4" />
          </Button>
          <QuoteDialog />
        </div>

        {/* Mobile */}
        <div className="flex items-center gap-2 md:hidden">
          <Button
            variant="outline"
            className="gap-2"
            onClick={() => window.open(BRAND.whatsappHref, "_blank")}
          >
            <MessageCircle className="h-4 w-4" />
          </Button>
          <Button
            variant="secondary"
            onClick={() => setOpen((v) => !v)}
            className="rounded-xl"
            aria-label="Abrir men√∫"
          >
            Men√∫
          </Button>
        </div>
      </div>

      {open ? (
        <div className="border-t md:hidden">
          <div className="mx-auto grid max-w-6xl gap-2 px-4 py-3">
            {ROUTES.map((r) => (
              <Button
                key={r.key}
                variant={route === r.key ? "secondary" : "ghost"}
                className="justify-start rounded-xl"
                onClick={() => {
                  navigate(r.key);
                  setOpen(false);
                }}
              >
                {r.label}
              </Button>
            ))}
            <Separator />
            <QuoteDialog />
          </div>
        </div>
      ) : null}
    </div>
  );
}

function Footer() {
  return (
    <footer className="border-t">
      <div className="mx-auto grid max-w-6xl gap-8 px-4 py-12 md:grid-cols-3">
        <div className="space-y-3">
          <div className="flex items-center gap-2">
            <Badge variant="secondary" className="rounded-xl">
              {BRAND.name}
            </Badge>
            <Badge className="rounded-xl">B2B</Badge>
          </div>
          <p className="text-sm text-muted-foreground">{BRAND.subtagline}</p>
          <div className="flex flex-wrap gap-2">
            <Button
              size="sm"
              variant="outline"
              className="gap-2 rounded-xl"
              onClick={() => window.open(BRAND.whatsappHref, "_blank")}
            >
              WhatsApp <MessageCircle className="h-4 w-4" />
            </Button>
            <Button
              size="sm"
              variant="outline"
              className="gap-2 rounded-xl"
              onClick={() => window.open(BRAND.emailHref)}
            >
              Email <Mail className="h-4 w-4" />
            </Button>
          </div>
        </div>

        <div className="space-y-3">
          <p className="text-sm font-semibold">Contacto</p>
          <div className="space-y-2 text-sm text-muted-foreground">
            <div className="flex items-center gap-2">
              <Phone className="h-4 w-4" />
              <a className="hover:underline" href={BRAND.phoneHref}>
                {BRAND.phoneDisplay}
              </a>
            </div>
            <div className="flex items-center gap-2">
              <Mail className="h-4 w-4" />
              <a className="hover:underline" href={BRAND.emailHref}>
                {BRAND.emailDisplay}
              </a>
            </div>
            <div className="flex items-center gap-2">
              <MapPin className="h-4 w-4" />
              {BRAND.address}
            </div>
            <div className="flex items-center gap-2">
              <Clock className="h-4 w-4" />
              {BRAND.hours}
            </div>
          </div>
        </div>

        <div className="space-y-3">
          <p className="text-sm font-semibold">Accesos r√°pidos</p>
          <div className="grid gap-2">
            <Button
              variant="ghost"
              className="justify-start rounded-xl"
              onClick={() => navigate("servicios")}
            >
              Servicios
            </Button>
            <Button
              variant="ghost"
              className="justify-start rounded-xl"
              onClick={() => navigate("soporte")}
            >
              Soporte
            </Button>
            <Button
              variant="ghost"
              className="justify-start rounded-xl"
              onClick={() => navigate("contacto")}
            >
              Cotizar
            </Button>
          </div>
        </div>
      </div>

      <div className="border-t">
        <div className="mx-auto flex max-w-6xl flex-col gap-2 px-4 py-6 text-xs text-muted-foreground md:flex-row md:items-center md:justify-between">
          <p>
            ¬© {new Date().getFullYear()} {BRAND.name}. Todos los derechos reservados.
          </p>
          <p>Hecho para conversi√≥n, claridad y confianza.</p>
        </div>
      </div>
    </footer>
  );
}

function WhatsAppFloating() {
  return (
    <button
      onClick={() => window.open(BRAND.whatsappHref, "_blank")}
      className="fixed bottom-5 right-5 z-50 inline-flex items-center gap-2 rounded-2xl border bg-background px-4 py-3 shadow-sm hover:shadow"
      aria-label="Abrir WhatsApp"
    >
      <MessageCircle className="h-5 w-5" />
      <span className="text-sm font-semibold">WhatsApp</span>
    </button>
  );
}

function HomePage() {
  return (
    <div>
      {/* HERO */}
      <section className="border-b">
        <div className="mx-auto grid max-w-6xl gap-8 px-4 py-12 md:grid-cols-2 md:items-center md:py-16">
          <motion.div {...fadeUp}>
            <Badge className="rounded-xl" variant="secondary">
              B2B ¬∑ Telecomunicaciones
            </Badge>
            <h1 className="mt-4 text-4xl font-semibold tracking-tight md:text-5xl">{BRAND.tagline}</h1>
            <p className="mt-4 max-w-xl text-muted-foreground">{BRAND.subtagline}</p>
            <div className="mt-7 flex flex-col gap-2 sm:flex-row">
              <QuoteDialog />
              <Button variant="outline" className="gap-2" onClick={() => navigate("servicios")}>
                Ver servicios <ArrowRight className="h-4 w-4" />
              </Button>
            </div>
            <div className="mt-6 flex flex-wrap gap-2">
              {["Soporte especializado", "Soluciones a medida", "Enfoque en continuidad"].map((t) => (
                <Badge key={t} variant="outline" className="rounded-xl">
                  {t}
                </Badge>
              ))}
            </div>
          </motion.div>

          <motion.div {...fadeUp} transition={{ ...fadeUp.transition, delay: 0.1 }}>
            <Card className="rounded-3xl">
              <CardHeader>
                <CardTitle className="text-base">Cotiza en 60 segundos</CardTitle>
                <CardDescription>Cu√©ntanos sedes, usuarios y necesidad. Respondemos r√°pido.</CardDescription>
              </CardHeader>
              <CardContent>
                <form
                  className="grid gap-3"
                  onSubmit={(e) => {
                    e.preventDefault();
                    navigate("contacto");
                  }}
                >
                  <div className="grid gap-3 sm:grid-cols-2">
                    <Input placeholder="Empresa" required />
                    <Input placeholder="Comuna" required />
                  </div>
                  <Input placeholder="Email" type="email" required />
                  <Textarea
                    placeholder="Necesito‚Ä¶ (internet, enlace dedicado, telefon√≠a IP, redes)"
                    className="min-h-[90px]"
                  />
                  <Button type="submit" className="gap-2">
                    Continuar <ArrowRight className="h-4 w-4" />
                  </Button>
                  <p className="text-xs text-muted-foreground">
                    * MVP: deriva a Contacto. En producci√≥n se conecta a email/CRM.
                  </p>
                </form>
              </CardContent>
            </Card>
          </motion.div>
        </div>
      </section>

      {/* TRUST */}
      <section className="mx-auto max-w-6xl px-4 py-12">
        <motion.div {...fadeUp} className="grid gap-4 md:grid-cols-3">
          {[
            {
              icon: BadgeCheck,
              title: "Est√°ndar profesional",
              desc: "Implementaciones cuidadas, documentaci√≥n y buenas pr√°cticas.",
            },
            { icon: Headset, title: "Soporte cercano", desc: "Canales claros para atenci√≥n y resoluci√≥n." },
            { icon: ShieldCheck, title: "Continuidad", desc: "Dise√±o orientado a estabilidad y operaci√≥n." },
          ].map((c) => (
            <Card key={c.title} className="rounded-3xl">
              <CardHeader>
                <div className="flex items-center gap-2">
                  <c.icon className="h-5 w-5" />
                  <CardTitle className="text-base">{c.title}</CardTitle>
                </div>
                <CardDescription>{c.desc}</CardDescription>
              </CardHeader>
            </Card>
          ))}
        </motion.div>
      </section>

      {/* SERVICES */}
      <section className="border-t bg-muted/20">
        <div className="mx-auto max-w-6xl px-4 py-12">
          <motion.div {...fadeUp}>
            <h2 className="text-2xl font-semibold tracking-tight">Servicios principales</h2>
            <p className="mt-2 max-w-2xl text-muted-foreground">
              Soluciones B2B para conectividad, voz y redes. Dise√±adas para rendimiento y soporte.
            </p>
          </motion.div>

          <div className="mt-8 grid gap-4 md:grid-cols-2">
            {SERVICES.map((s) => (
              <Card key={s.key} className="rounded-3xl">
                <CardHeader>
                  <div className="flex items-center gap-2">
                    <s.icon className="h-5 w-5" />
                    <CardTitle className="text-base">{s.title}</CardTitle>
                  </div>
                  <CardDescription>{s.summary}</CardDescription>
                </CardHeader>
                <CardContent className="space-y-4">
                  <div className="grid gap-2">
                    {s.bullets.map((b) => (
                      <div key={b} className="flex items-start gap-2 text-sm">
                        <CheckCircle2 className="mt-0.5 h-4 w-4" />
                        <span>{b}</span>
                      </div>
                    ))}
                  </div>
                  <p className="text-sm text-muted-foreground">
                    <span className="font-medium text-foreground">Ideal para:</span> {s.who}
                  </p>
                  <div className="flex flex-col gap-2 sm:flex-row">
                    <Button className="gap-2" onClick={() => navigate("servicios")}>
                      Ver detalles <ArrowRight className="h-4 w-4" />
                    </Button>
                    <Button variant="outline" className="gap-2" onClick={() => navigate("contacto")}>
                      Cotizar <FileText className="h-4 w-4" />
                    </Button>
                  </div>
                </CardContent>
              </Card>
            ))}
          </div>
        </div>
      </section>

      {/* CTA */}
      <section className="border-t">
        <div className="mx-auto max-w-6xl px-4 py-12">
          <motion.div
            {...fadeUp}
            className="flex flex-col justify-between gap-6 rounded-3xl border bg-background p-6 md:flex-row md:items-center"
          >
            <div>
              <h3 className="text-xl font-semibold">¬øNecesitas conectividad confiable para tu empresa?</h3>
              <p className="mt-2 max-w-2xl text-muted-foreground">
                Cu√©ntanos sedes, usuarios y objetivo (estabilidad, latencia, voz, redes). Respondemos con propuesta.
              </p>
            </div>
            <div className="flex flex-col gap-2 sm:flex-row">
              <QuoteDialog />
              <Button
                variant="outline"
                className="gap-2"
                onClick={() => window.open(BRAND.whatsappHref, "_blank")}
              >
                WhatsApp <MessageCircle className="h-4 w-4" />
              </Button>
            </div>
          </motion.div>
        </div>
      </section>
    </div>
  );
}

function ServiciosPage() {
  return (
    <PageContainer
      title="Servicios"
      subtitle="Soluciones B2B dise√±adas para continuidad operativa, desempe√±o y soporte."
    >
      <div className="grid gap-4 md:grid-cols-2">
        {SERVICES.map((s) => (
          <Card key={s.key} className="rounded-3xl">
            <CardHeader>
              <div className="flex items-center gap-2">
                <s.icon className="h-5 w-5" />
                <CardTitle className="text-base">{s.title}</CardTitle>
              </div>
              <CardDescription>{s.summary}</CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="grid gap-2">
                {s.bullets.map((b) => (
                  <div key={b} className="flex items-start gap-2 text-sm">
                    <CheckCircle2 className="mt-0.5 h-4 w-4" />
                    <span>{b}</span>
                  </div>
                ))}
              </div>
              <Separator />
              <p className="text-sm text-muted-foreground">
                <span className="font-medium text-foreground">Ideal para:</span> {s.who}
              </p>
              <div className="flex flex-col gap-2 sm:flex-row">
                <Button className="gap-2" onClick={() => navigate("contacto")}>
                  Cotizar <ArrowRight className="h-4 w-4" />
                </Button>
                <Button
                  variant="outline"
                  className="gap-2"
                  onClick={() => window.open(BRAND.whatsappHref, "_blank")}
                >
                  WhatsApp <MessageCircle className="h-4 w-4" />
                </Button>
              </div>
            </CardContent>
          </Card>
        ))}
      </div>

      <div className="mt-10 rounded-3xl border bg-muted/20 p-6">
        <h3 className="text-lg font-semibold">Checklist para cotizar m√°s r√°pido</h3>
        <div className="mt-4 grid gap-2 text-sm">
          {[
            "Comuna/ubicaci√≥n y n√∫mero de sedes",
            "Cantidad de usuarios/dispositivos",
            "Necesidad principal: estabilidad, baja latencia, voz, redes",
            "Si necesitas redundancia",
            "Ventana de implementaci√≥n (fecha estimada)",
          ].map((t) => (
            <div key={t} className="flex items-start gap-2">
              <CheckCircle2 className="mt-0.5 h-4 w-4" />
              <span>{t}</span>
            </div>
          ))}
        </div>
      </div>
    </PageContainer>
  );
}

function SolucionesPage() {
  return (
    <PageContainer
      title="Soluciones"
      subtitle="Enfoques por tipo de cliente. Si tu caso es especial, lo dise√±amos a medida."
    >
      <div className="grid gap-4 md:grid-cols-3">
        {SOLUTIONS.map((s) => (
          <Card key={s.key} className="rounded-3xl">
            <CardHeader>
              <div className="flex items-center gap-2">
                <s.icon className="h-5 w-5" />
                <CardTitle className="text-base">{s.title}</CardTitle>
              </div>
              <CardDescription>{s.desc}</CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="grid gap-2">
                {s.bullets.map((b) => (
                  <div key={b} className="flex items-start gap-2 text-sm">
                    <CheckCircle2 className="mt-0.5 h-4 w-4" />
                    <span>{b}</span>
                  </div>
                ))}
              </div>
              <Button className="w-full gap-2" onClick={() => navigate("contacto")}>
                Cotizar soluci√≥n <ArrowRight className="h-4 w-4" />
              </Button>
            </CardContent>
          </Card>
        ))}
      </div>
    </PageContainer>
  );
}

function CasosPage() {
  return (
    <PageContainer
      title="Clientes & Casos"
      subtitle="Estructura lista para completar con tus clientes reales (sube confianza)."
    >
      <div className="grid gap-4 md:grid-cols-3">
        {[
          { title: "Caso 1 (placeholder)", desc: "Internet empresarial + Wi‚ÄëFi para oficina", tag: "PYME" },
          { title: "Caso 2 (placeholder)", desc: "Telefon√≠a IP para equipo h√≠brido", tag: "Servicios" },
          { title: "Caso 3 (placeholder)", desc: "Redes + FO para bodega", tag: "Log√≠stica" },
        ].map((c) => (
          <Card key={c.title} className="rounded-3xl">
            <CardHeader>
              <Badge variant="secondary" className="w-fit rounded-xl">
                {c.tag}
              </Badge>
              <CardTitle className="text-base">{c.title}</CardTitle>
              <CardDescription>{c.desc}</CardDescription>
            </CardHeader>
            <CardContent className="grid gap-2 text-sm">
              {["Problema ‚Üí", "Soluci√≥n ‚Üí", "Resultado ‚Üí"].map((t) => (
                <div key={t} className="flex items-start gap-2">
                  <CheckCircle2 className="mt-0.5 h-4 w-4" />
                  <span className="text-muted-foreground">{t} completa con datos reales</span>
                </div>
              ))}
            </CardContent>
          </Card>
        ))}
      </div>

      <div className="mt-10 rounded-3xl border bg-muted/20 p-6">
        <h3 className="text-lg font-semibold">Tip para verse ‚Äúempresa grande‚Äù</h3>
        <p className="mt-2 text-sm text-muted-foreground">
          Agrega logos (con permiso), m√©tricas simples (usuarios/sedes/tiempos) y 3 bullets: problema ‚Üí soluci√≥n ‚Üí resultado.
        </p>
      </div>
    </PageContainer>
  );
}

function NosotrosPage() {
  return (
    <PageContainer
      title="Nosotros"
      subtitle="Historia corta, t√©cnica y confiable. Pensada para que un gerente conf√≠e." 
    >
      <div className="grid gap-4 md:grid-cols-2">
        <Card className="rounded-3xl">
          <CardHeader>
            <CardTitle className="text-base">Qu√© hacemos</CardTitle>
            <CardDescription>
              Equipo enfocado en soluciones B2B de telecomunicaciones y redes, con implementaci√≥n y soporte.
            </CardDescription>
          </CardHeader>
          <CardContent className="grid gap-2 text-sm">
            {[
              "Levantamiento y dise√±o",
              "Implementaci√≥n profesional",
              "Soporte y continuidad",
              "Documentaci√≥n y buenas pr√°cticas",
            ].map((t) => (
              <div key={t} className="flex items-start gap-2">
                <CheckCircle2 className="mt-0.5 h-4 w-4" />
                <span>{t}</span>
              </div>
            ))}
          </CardContent>
        </Card>

        <Card className="rounded-3xl">
          <CardHeader>
            <CardTitle className="text-base">C√≥mo trabajamos</CardTitle>
            <CardDescription>Proceso simple y transparente.</CardDescription>
          </CardHeader>
          <CardContent className="grid gap-3 text-sm">
            {[
              { n: "1", t: "Diagn√≥stico", d: "Requisitos, sedes, riesgos y objetivo." },
              { n: "2", t: "Propuesta", d: "Alcance, plazos, costos y recomendaciones." },
              { n: "3", t: "Implementaci√≥n", d: "Plan y puesta en marcha con pruebas." },
              { n: "4", t: "Soporte", d: "Canales claros y seguimiento." },
            ].map((s) => (
              <div key={s.n} className="rounded-2xl border bg-background p-3">
                <div className="flex items-center gap-2">
                  <Badge className="rounded-xl" variant="secondary">
                    Paso {s.n}
                  </Badge>
                  <span className="font-medium">{s.t}</span>
                </div>
                <p className="mt-1 text-muted-foreground">{s.d}</p>
              </div>
            ))}
          </CardContent>
        </Card>
      </div>

      <div className="mt-10 rounded-3xl border p-6">
        <div className="flex flex-col justify-between gap-4 md:flex-row md:items-center">
          <div>
            <h3 className="text-lg font-semibold">Hablemos de tu proyecto</h3>
            <p className="mt-2 text-sm text-muted-foreground">
              Te ayudamos a elegir la soluci√≥n correcta, sin venderte de m√°s.
            </p>
          </div>
          <div className="flex flex-col gap-2 sm:flex-row">
            <QuoteDialog />
            <Button
              variant="outline"
              className="gap-2"
              onClick={() => window.open(BRAND.whatsappHref, "_blank")}
            >
              WhatsApp <MessageCircle className="h-4 w-4" />
            </Button>
          </div>
        </div>
      </div>
    </PageContainer>
  );
}

function SoportePage() {
  return (
    <PageContainer
      title="Soporte"
      subtitle="Canales claros para atenci√≥n t√©cnica. En producci√≥n puedes sumar tickets/portal clientes."
    >
      <div className="grid gap-4 md:grid-cols-2">
        <Card className="rounded-3xl">
          <CardHeader>
            <div className="flex items-center gap-2">
              <Headset className="h-5 w-5" />
              <CardTitle className="text-base">Mesa de ayuda</CardTitle>
            </div>
            <CardDescription>Describe el incidente y adjunta informaci√≥n clave.</CardDescription>
          </CardHeader>
          <CardContent>
            <form
              className="grid gap-3"
              onSubmit={(e) => {
                e.preventDefault();
                alert("Solicitud enviada (demo). Con√©ctalo a email/CRM al publicar.");
              }}
            >
              <Input placeholder="Empresa" required />
              <Input placeholder="Contacto (nombre)" required />
              <Input placeholder="Email" type="email" required />
              <Input placeholder="Tel√©fono" required />
              <Textarea
                placeholder="Describe el incidente: servicio afectado, sede, hora, impacto."
                className="min-h-[120px]"
                required
              />
              <Button type="submit" className="gap-2">
                Enviar a soporte <ArrowRight className="h-4 w-4" />
              </Button>
              <p className="text-xs text-muted-foreground">
                Consejo: incluye pantallazos, IP (si aplica) y hora exacta.
              </p>
            </form>
          </CardContent>
        </Card>

        <Card className="rounded-3xl">
          <CardHeader>
            <CardTitle className="text-base">FAQ</CardTitle>
            <CardDescription>Reduce fricci√≥n y sube confianza.</CardDescription>
          </CardHeader>
          <CardContent>
            <Accordion type="single" collapsible className="w-full">
              {FAQS.map((f, idx) => (
                <AccordionItem key={idx} value={`faq-${idx}`}>
                  <AccordionTrigger>{f.q}</AccordionTrigger>
                  <AccordionContent className="text-muted-foreground">{f.a}</AccordionContent>
                </AccordionItem>
              ))}
            </Accordion>
            <Separator className="my-5" />
            <div className="grid gap-2">
              <Button
                variant="outline"
                className="gap-2"
                onClick={() => window.open(BRAND.whatsappHref, "_blank")}
              >
                WhatsApp soporte <MessageCircle className="h-4 w-4" />
              </Button>
              <Button variant="outline" className="gap-2" onClick={() => window.open(BRAND.emailHref)}>
                Email soporte <Mail className="h-4 w-4" />
              </Button>
            </div>
          </CardContent>
        </Card>
      </div>
    </PageContainer>
  );
}

function ContactoPage() {
  return (
    <PageContainer
      title="Contacto"
      subtitle="Cotiza, agenda levantamiento o consulta. Respondemos con propuesta clara."
    >
      <div className="grid gap-4 md:grid-cols-2">
        <Card className="rounded-3xl">
          <CardHeader>
            <CardTitle className="text-base">Cotizaci√≥n / Consulta</CardTitle>
            <CardDescription>Usa el formulario y canales directos.</CardDescription>
          </CardHeader>
          <CardContent>
            <QuoteDialog triggerVariant="secondary" />
            <Separator className="my-5" />
            <div className="grid gap-3">
              <Button className="gap-2" onClick={() => window.open(BRAND.whatsappHref, "_blank")}>
                WhatsApp <MessageCircle className="h-4 w-4" />
              </Button>
              <Button variant="outline" className="gap-2" onClick={() => window.open(BRAND.emailHref)}>
                Email <Mail className="h-4 w-4" />
              </Button>
              <Button variant="outline" className="gap-2" onClick={() => window.open(BRAND.phoneHref)}>
                Llamar <Phone className="h-4 w-4" />
              </Button>
            </div>
          </CardContent>
        </Card>

        <Card className="rounded-3xl">
          <CardHeader>
            <CardTitle className="text-base">Datos</CardTitle>
            <CardDescription>Informaci√≥n visible para generar confianza.</CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="space-y-2 text-sm text-muted-foreground">
              <div className="flex items-center gap-2">
                <MapPin className="h-4 w-4" />
                {BRAND.address}
              </div>
              <div className="flex items-center gap-2">
                <Clock className="h-4 w-4" />
                {BRAND.hours}
              </div>
              <div className="flex items-center gap-2">
                <Mail className="h-4 w-4" />
                <a className="hover:underline" href={BRAND.emailHref}>
                  {BRAND.emailDisplay}
                </a>
              </div>
              <div className="flex items-center gap-2">
                <Phone className="h-4 w-4" />
                <a className="hover:underline" href={BRAND.phoneHref}>
                  {BRAND.phoneDisplay}
                </a>
              </div>
            </div>
            <Separator />
            <div className="grid gap-2">
              <div className="flex items-start gap-2 text-sm">
                <Users className="mt-0.5 h-4 w-4" />
                <span className="text-muted-foreground">
                  Atenci√≥n B2B: especifica sedes, usuarios y prioridad (continuidad/latencia/voz).
                </span>
              </div>
              <div className="flex items-start gap-2 text-sm">
                <Building2 className="mt-0.5 h-4 w-4" />
                <span className="text-muted-foreground">Si necesitas visita t√©cnica, ind√≠calo en el mensaje.</span>
              </div>
            </div>
          </CardContent>
        </Card>
      </div>
    </PageContainer>
  );
}

function NotFoundPage() {
  return (
    <PageContainer title="P√°gina no encontrada" subtitle="Vuelve al inicio o elige una secci√≥n del men√∫.">
      <div className="flex gap-2">
        <Button onClick={() => navigate("home")}>Ir a Inicio</Button>
        <Button variant="outline" onClick={() => navigate("contacto")}>Contacto</Button>
      </div>
    </PageContainer>
  );
}

export default function ChileTelkoWebsite() {
  const [route, setRoute] = useState<RouteKey>("home");

  useEffect(() => {
    const sync = () => setRoute(getRouteFromHash());
    sync();
    window.addEventListener("hashchange", sync);
    return () => window.removeEventListener("hashchange", sync);
  }, []);

  const Page = useMemo(() => {
    switch (route) {
      case "home":
        return <HomePage />;
      case "servicios":
        return <ServiciosPage />;
      case "soluciones":
        return <SolucionesPage />;
      case "casos":
        return <CasosPage />;
      case "nosotros":
        return <NosotrosPage />;
      case "soporte":
        return <SoportePage />;
      case "contacto":
        return <ContactoPage />;
      default:
        return <NotFoundPage />;
    }
  }, [route]);

  return (
    <div className="min-h-screen bg-background text-foreground">
      <Header route={route} />
      {Page}
      <Footer />
      <WhatsAppFloating />
    </div>
  );
}
